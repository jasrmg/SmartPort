{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>SmartPort</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="{% static 'global/auth.css' %}" />
  </head>
  <body>
    <div class="container">
      <!-- Branding Section - Now at Top -->
      <div class="branding">
        <div class="logo">
          <i class="fas fa-anchor logo-icon"></i>
          <span class="logo-text">SMART PORT</span>
        </div>
        <div class="branding-content">
          <h2>Global Shipping Solutions</h2>
          <p>
            Connecting ports worldwide with reliable, efficient, and secure
            shipping services.
          </p>
          <i class="fas fa-ship ship-icon"></i>
        </div>
      </div>

      <!-- Forms Section -->
      <div class="forms">
        <!-- Login Form (Simplified Version) -->
        <div class="form-container" id="login-form">
          <div class="form-header">
            <h2>Welcome Back</h2>
            <p>Sign in to access your shipping dashboard</p>
          </div>

          <!-- ðŸ”´ Error Message Block -->
          <div id="login-error" class="form-error">
            <i class="fas fa-exclamation-circle error-icon"></i>
            <span id="login-error-msg">Invalid email or password.</span>
          </div>

          <form id="login">
            <div class="form-group">
              <label for="login-email">Email Address</label>
              <input
                type="text"
                id="login-email"
                class="form-control"
                placeholder="Enter your email"
              />
            </div>
            <div class="form-group">
              <label for="login-password">Password</label>
              <div class="password-wrapper">
                <input
                  type="password"
                  id="login-password"
                  class="form-control"
                  placeholder="Enter your password"
                  required
                />
                <i class="fas fa-eye-slash password-toggle"></i>
              </div>
            </div>
            <div class="actions">
              <button type="button" class="btn btn-outline" id="show-signup">
                Sign Up
              </button>
              <button type="submit" class="btn btn-secondary">
                <span class="btn-text">Login</span>
                <span class="spinner" style="display: none"></span>
              </button>
            </div>
            <div class="text-center mt-3">
              <p>
                <a class="link" id="forgot-password-btn">Forgot Password?</a>
              </p>
            </div>
          </form>
        </div>

        <!-- Signup Form (Enhanced Version with User Types) -->
        <div class="form-container" id="signup-form" style="display: none">
          <div class="form-header">
            <h2>Create Account</h2>
            <p>Join our port management system</p>
          </div>

          <!-- Progress Steps - Compact for Mobile -->
          <div class="progress-steps">
            <div class="progress-line">
              <div
                class="progress-line-fill"
                id="progress-fill"
                style="width: 33%"
              ></div>
            </div>

            <div class="step active" data-step="1">
              <div class="step-number">1</div>
              <i class="fas fa-user-tie step-icon"></i>
              <div class="step-title">Role</div>
            </div>

            <div class="step" data-step="2">
              <div class="step-number">2</div>
              <i class="fas fa-info-circle step-icon"></i>
              <div class="step-title">Details</div>
            </div>

            <div class="step" data-step="3">
              <div class="step-number">3</div>
              <i class="fas fa-ship step-icon"></i>
              <div class="step-title">Finish</div>
            </div>
          </div>

          <!-- Step 1: Account Type Selection - Stacked for Mobile -->
          <div class="form-page active" id="signup-step1">
            <div class="form-error" id="role-error">
              <i class="fas fa-exclamation-triangle error-icon"></i>
              <span class="error-message">Please select your user role.</span>
            </div>

            <div class="form-group">
              <label>Select Your Role</label>
              <div class="user-types">
                <div class="user-type" data-role="shipper">
                  <i class="fas fa-boxes"></i>
                  <h4>Shipper</h4>
                  <p>Cargo owners and logistics companies</p>
                </div>
                <div class="user-type" data-role="custom">
                  <i class="fas fa-passport"></i>
                  <h4>Customs</h4>
                  <p>Customs and border control officials</p>
                </div>
              </div>
              <input type="hidden" id="user-role" required />
            </div>
            <div class="form-navigation">
              <button type="button" class="btn btn-outline" id="back-to-login">
                Back to Login
              </button>
              <button type="button" class="btn btn-secondary" id="next-step1">
                Next
              </button>
            </div>
          </div>

          <!-- Step 2: User Details -->
          <form class="form-page" id="signup-step2">
            <div class="form-error" id="signup-error">
              <i class="fas fa-exclamation-triangle error-icon"></i>
              <span class="error-message">Error message goes here</span>
            </div>

            <div class="form-group">
              <label for="signup-firstname">First Name</label>
              <input
                type="text"
                id="signup-firstname"
                class="form-control"
                placeholder="Enter first name"
                required
              />
            </div>
            <div class="form-group">
              <label for="signup-lastname">Last Name</label>
              <input
                type="text"
                id="signup-lastname"
                class="form-control"
                placeholder="Enter last name"
                required
              />
            </div>
            <div class="form-group">
              <label for="signup-email">Email</label>
              <input
                type="email"
                id="signup-email"
                class="form-control"
                placeholder="Enter email"
                required
              />
            </div>
            <div class="form-group">
              <label for="signup-password">Password</label>
              <div class="password-wrapper">
                <input
                  type="password"
                  id="signup-password"
                  class="form-control"
                  placeholder="Create password (min 8 chars)"
                  required
                />
                <i class="fas fa-eye-slash password-toggle"></i>
              </div>
            </div>
            <div class="form-group">
              <label for="signup-confirm">Confirm Password</label>
              <div class="password-wrapper">
                <input
                  type="password"
                  id="signup-confirm"
                  class="form-control"
                  placeholder="Confirm password"
                  required
                />
                <i class="fas fa-eye-slash password-toggle"></i>
              </div>
            </div>
            <div class="form-navigation">
              <button type="button" class="btn btn-outline" id="prev-step2">
                Previous
              </button>
              <button type="button" class="btn btn-secondary" id="next-step2">
                Next
              </button>
            </div>
          </form>

          <!-- Step 3: Completion -->
          <form class="form-page" id="signup-step3">
            <div class="form-error" id="signup-step3-error">
              <i class="fas fa-exclamation-triangle error-icon"></i>
              <span class="error-message">Error message goes here</span>
            </div>

            <div id="verification-method">
              <label>Verification Method</label>
              <div class="user-types">
                <div class="user-type" data-verification="email">
                  <i class="fas fa-envelope"></i>
                  <h4>Email</h4>
                  <p>Code sent to email</p>
                </div>
                <div class="user-type" data-verification="sms">
                  <i class="fas fa-mobile-alt"></i>
                  <h4>SMS</h4>
                  <p>Code texted to phone</p>
                </div>
              </div>
              <input type="hidden" id="verification-type" />
            </div>

            <div class="form-group" id="phone-number-group">
              <label for="phone-number">Phone Number</label>
              <input
                type="tel"
                id="phone-number"
                class="form-control"
                placeholder="Enter phone number"
              />
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" id="terms-agree" /> I agree to the
                <a href="" class="link" id="eula">Terms and Privacy Policy</a>
              </label>
            </div>
            <div class="form-navigation">
              <button type="button" class="btn btn-outline" id="prev-step3">
                Previous
              </button>
              <!-- <button type="button" class="btn btn-outline" id="testBtn">
                Test
              </button> -->
              <button type="submit" class="btn btn-secondary" id="registerBtn">
                <span class="btn-text">Complete Registration</span>
                <span class="spinner" style="display: none"></span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- EULA Modal -->
    <div id="eula-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Terms and Privacy Policy</h2>
          <button class="modal-close" id="eula-close-top">&times;</button>
        </div>
        <div class="modal-body">
          <p><strong>Last Updated:</strong> 05/17/2025</p>
          <p>
            <strong>1. Introduction</strong><br />
            Welcome to the Centralized Interisland Shipping Data Sharing System
            ("the System"). These Terms and Conditions govern your use of the
            System, including all services and features provided. By accessing
            or using the System, you agree to comply with these terms.
          </p>
          <p>
            <strong>2. Definitions</strong><br />
            <strong>Admin:</strong> The authorized user responsible for managing
            the system, user accounts, and data integrity.<br />
            <strong>Shippers:</strong> Users responsible for submitting shipping
            information, manifests, and related documents specific to
            interisland shipping within the Philippines. <br />
            <strong>Customs:</strong> Government representatives responsible for
            reviewing and approving manifests and other shipping
            documentation.<br />
            <strong>Employees:</strong> Users with limited access to report
            incidents related to cargo handling or safety.
          </p>
          <p>
            <strong>3. User Responsibilities</strong><br />
            <strong>3.1 Admin Responsibilities</strong><br />
            Manage user accounts and permissions. <br />
            Monitor system usage to ensure data accuracy and compliance. <br />
            Update and maintain the database. <br />
            <strong>3.2 Shippers Responsibilities</strong> <br />
            Submit accurate shipping manifests and related documentation. <br />
            Ensure the correctness of data before submission. <br />
            Comply with customs requirements and guidelines. <br />
            <strong>3.3 Customs Responsibilities</strong> <br />
            Review and approve manifests for interisland shipping compliance.
            <br />
            Verify data accuracy and cross-check with official records. Maintain
            <br />
            the confidentiality of shipping data. <br />
            <strong>3.4 Employee Responsibilities</strong> <br />
            Report incidents related to cargo damage or safety violations.
            <br />
            Use the reporting system responsibly and accurately. <br />
            Maintain confidentiality when reporting sensitive issues. <br />
          </p>
          <p>
            <strong>4. Data Access and Sharing</strong><br />
            Only authorized users may access specific data based on their roles.
            <br />
            Data shared within the system must comply with relevant data
            protection laws. <br />
          </p>
          <p>
            <strong>5. Privacy and Data Protection</strong><br />
            The System processes personal and business data in accordance with
            the Data Privacy Act of 2012. <br />
            Data is collected solely for operational and compliance purposes.
            <br />
            Users must ensure the confidentiality and integrity of data they
            handle. <br />
          </p>
          <p>
            <strong>6. Acceptable Use</strong><br />
            Users must not misuse, alter, or delete data without proper
            authorization. <br />
            The use of false or misleading data is strictly prohibited. <br />
            Users must report any suspicious activities to the Admin immediately
            <br />
          </p>
          <p>
            <strong>7. Limitation of Liability</strong><br />
            The System is provided "as is" without warranties of any kind.
            <br />
            The Admin is not liable for data inaccuracies submitted by Shippers
            or other users. <br />
          </p>
          <p>
            <strong>8. Termination</strong><br />
            Access may be revoked for any breach of these terms or misuse of the
            system. <br />
            The Admin reserves the right to update or terminate services at any
            time. <br />
          </p>
          <p>
            <strong>9. Modifications to the Terms</strong><br />
            These terms may be updated periodically. Continued use of the System
            constitutes acceptance of the revised terms. <br />
          </p>
          <p>
            <strong>10. Governing Law</strong><br />
            These Terms are governed by the laws of the Philippines,
            specifically pertaining to interisland shipping regulations.. Any
            disputes arising under these terms shall be resolved in the courts
            of Cebu City.
            <br />
          </p>

          <p>
            <strong>11. Contact Information</strong><br />
            For inquiries regarding these terms, please contact the system
            administrator.
          </p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline" id="eula-close-bottom">Close</button>
          <button class="btn btn-secondary" id="eula-agree">I Agree</button>
        </div>
      </div>
    </div>

    <!-- EMAIL VERIFICATION MODAL -->
    <div id="email-verify-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="verify-modal-title">Verify Your Email</h2>
        </div>
        <div class="modal-body">
          <p id="verify-modal-message">
            Weâ€™ve sent a magic link to your email. Please click the link to
            verify your account.
          </p>
        </div>
        <div class="modal-footer">
          <button id="resend-btn" class="btn btn-resend btn-outline">
            <span class="btn-text">Resend</span>
            <span class="spinner" style="display: none"></span>
          </button>
          <button id="verify-btn" class="btn btn-secondary">
            <span class="btn-text">Verify</span>
            <span class="spinner" style="display: none"></span>
          </button>
        </div>
      </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Reset Your Password</h2>
          <button class="modal-close" id="close-forgot-password">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div id="reset-status" class="form-status" style="display: none">
            <i id="reset-status-icon" class="fas"></i>
            <span id="reset-status-msg"></span>
          </div>

          <form id="forgot-password-form">
            <label for="reset-email">Enter your email address:</label>
            <input
              type="text"
              id="reset-email"
              class="form-control"
              placeholder="you@example.com"
            />
            <p id="reset-status" class="message"></p>
            <div class="modal-footer">
              <button id="cancel-forgot-password" class="btn btn-outline">
                Cancel
              </button>
              <button
                type="submit"
                class="btn btn-secondary"
                id="send-reset-email"
              >
                <span class="btn-text">Send Reset Link</span>
                <span class="spinner" style="display: none"></span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>

    <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

    <!-- Firebase Firestore (compat version) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

    <script src="{% static 'global/firebase_config.js' %}"></script>
    <script src="{% static 'global/auth.js' %}"></script>
    <script src="{% static 'global/forgot-password.js' %}"></script>
  </body>
</html>
